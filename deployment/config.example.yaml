# MailRaven Configuration Example
# Copy this file to /etc/mailraven/config.yaml and customize for your deployment

# Domain name for email server (must match your DNS records)
domain: mail.example.com

# SMTP server configuration
smtp:
  # Port for SMTP server (25 for production, 2525 for development)
  port: 25
  
  # Hostname presented in SMTP banner
  hostname: mail.example.com
  
  # Maximum message size in bytes (25 MB)
  max_message_size: 26214400
  
  # TLS configuration
  tls:
    # Enable TLS (STARTTLS)
    enabled: true
    
    # Path to TLS certificate file
    cert_file: /etc/mailraven/certs/tls.crt
    
    # Path to TLS private key file
    key_file: /etc/mailraven/certs/tls.key

# API server configuration (for mobile/web clients)
api:
  # Host to bind API server (0.0.0.0 for all interfaces, 127.0.0.1 for localhost only)
  host: 0.0.0.0
  
  # Port for API server (8443 for HTTPS, 8080 for HTTP)
  port: 8443
  
  # Enable TLS for API endpoints
  tls: true
  
  # Path to API TLS certificate (can be same as SMTP cert)
  tls_cert: /etc/mailraven/certs/tls.crt
  
  # Path to API TLS key (can be same as SMTP key)
  tls_key: /etc/mailraven/certs/tls.key
  
  # JWT secret for authentication tokens (generate with: openssl rand -base64 32)
  # IMPORTANT: Change this to a random secret in production!
  jwt_secret: "CHANGE-THIS-TO-RANDOM-SECRET-IN-PRODUCTION"

# Storage configuration
storage:
  # Path to SQLite database file
  db_path: /var/lib/mailraven/mailraven.db
  
  # Path to blob storage directory (for message bodies)
  blob_path: /var/lib/mailraven/blobs

# DKIM signing configuration
dkim:
  # Domain for DKIM signatures (usually same as main domain)
  domain: example.com
  
  # DKIM selector (appears in DNS: selector._domainkey.domain)
  selector: default
  
  # Path to DKIM private key (generated by quickstart)
  private_key_path: /etc/mailraven/dkim/private.key

# Logging configuration
logging:
  # Log level: debug, info, warn, error
  level: info
  
  # Log format: json, text
  format: json
  
  # Log output: stdout, file
  output: stdout
  
  # Log file path (if output is 'file')
  file_path: /var/log/mailraven/mailraven.log

# Security & validation settings
security:
  # Require SPF pass for incoming mail
  require_spf: false
  
  # Require DKIM pass for incoming mail
  require_dkim: false
  
  # Require DMARC pass for incoming mail
  require_dmarc: false
  
  # Enable rate limiting (per IP)
  rate_limit:
    enabled: true
    requests_per_minute: 100

# Example production configuration for Linux server:
#
# domain: mail.mycompany.com
# smtp:
#   port: 25
#   hostname: mail.mycompany.com
#   tls:
#     enabled: true
#     cert_file: /etc/letsencrypt/live/mail.mycompany.com/fullchain.pem
#     key_file: /etc/letsencrypt/live/mail.mycompany.com/privkey.pem
# api:
#   host: 0.0.0.0
#   port: 8443
#   tls: true
#   tls_cert: /etc/letsencrypt/live/mail.mycompany.com/fullchain.pem
#   tls_key: /etc/letsencrypt/live/mail.mycompany.com/privkey.pem
#   jwt_secret: "generated-from-openssl-rand-base64-32"
# storage:
#   db_path: /var/lib/mailraven/mailraven.db
#   blob_path: /var/lib/mailraven/blobs
# dkim:
#   domain: mycompany.com
#   selector: mail
#   private_key_path: /etc/mailraven/dkim/private.key
# logging:
#   level: info
#   format: json
#   output: file
#   file_path: /var/log/mailraven/mailraven.log
